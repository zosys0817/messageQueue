---
name: docs-sync
description: API λ…μ„Έμ™€ μ‹¤μ  μ½”λ“μ λ™κΈ°ν™” μƒνƒλ¥Ό κ²€μ‚¬ν•©λ‹λ‹¤. λ¬Έμ„ μ—…λ°μ΄νΈ ν•„μ” μ—¬λ¶€, μ½”λ“-λ¬Έμ„ μΌμΉ ν™•μΈ, κµ¬ν„ ν„ν™© νμ•… μ‹ μλ™ ν™μ„±ν™”λ©λ‹λ‹¤.
---

# Docs Sync

API λ…μ„Έμ™€ μ‹¤μ  μ½”λ“μ λ™κΈ°ν™” μƒνƒλ¥Ό κ²€μ‚¬ν•©λ‹λ‹¤.

---

## κ²€μ‚¬ μ μ°¨

### Step 1: κ²€μ‚¬ λ€μƒ κ²°μ •

**μ „μ²΄ κ²€μ‚¬** (μΈμ μ—†μ):
- `docs/05_api/api_*.md` λ¨λ“  νμΌ
- `backend/app/api/v1/routes/*.py` λ¨λ“  νμΌ

**λ„λ©”μΈλ³„ κ²€μ‚¬** (λ„λ©”μΈλ… μ§€μ •):
- `docs/05_api/api_{domain}.md`
- `backend/app/api/v1/routes/{domain}.py`

**λ³€κ²½λ νμΌλ§** (--changed):
- `git diff --name-only HEAD~1` μ‹¤ν–‰
- docs/05_api/ λλ” backend/app/api/ λ³€κ²½λ νμΌλ§ κ²€μ‚¬

---

### Step 2: μ—”λ“ν¬μΈνΈ μΌμΉ κ²€μ‚¬

**API λ…μ„Έμ—μ„ μ¶”μ¶:**
- HTTP λ©”μ„λ“ (GET, POST, PUT, DELETE, PATCH)
- μ—”λ“ν¬μΈνΈ κ²½λ΅ (/api/v1/...)
- μ”μ•½ μ„¤λ…

**λΌμ°ν„° μ½”λ“μ—μ„ μ¶”μ¶:**
- `@router.get()`, `@router.post()` λ“± λ°μ½”λ μ΄ν„°
- κ²½λ΅ ν¨ν„΄
- summary νλΌλ―Έν„°

**λΉ„κµ κ²°κ³Ό:**
- λ…μ„Έμ—λ§ μλ” μ—”λ“ν¬μΈνΈ β†’ [MISSING_CODE]
- μ½”λ“μ—λ§ μλ” μ—”λ“ν¬μΈνΈ β†’ [MISSING_DOC]
- μ–‘μ½ λ‹¤ μμ β†’ [SYNC]

---

### Step 3: Request/Response μ¤ν‚¤λ§ κ²€μ‚¬

**API λ…μ„Έμ—μ„ μ¶”μ¶:**
- Request Body ν•„λ“ (νƒ€μ…, ν•„μ μ—¬λ¶€)
- Response ν•„λ“ (νƒ€μ…)

**Pydantic μ¤ν‚¤λ§μ—μ„ μ¶”μ¶:**
- `backend/app/domains/{domain}/schemas.py`
- ν•„λ“λ…, νƒ€μ…, Optional μ—¬λ¶€

**λΉ„κµ κ²°κ³Ό:**
- ν•„λ“ λ„λ½ β†’ [MISMATCH]
- νƒ€μ… λ¶μΌμΉ β†’ [MISMATCH]
- μΌμΉ β†’ [SYNC]

---

### Step 4: μ—λ¬ μ½”λ“ κ²€μ‚¬

**API λ…μ„Έμ—μ„ μ¶”μ¶:**
- μ •μλ μ—λ¬ μ‘λ‹µ (400, 401, 403, 404, 409, 500 λ“±)
- μ—λ¬ μ½”λ“μ™€ λ©”μ‹μ§€

**λΌμ°ν„° μ½”λ“μ—μ„ μ¶”μ¶:**
- `responses={}` νλΌλ―Έν„°
- raiseλλ” HTTPException

**λΉ„κµ κ²°κ³Ό:**
- λ…μ„Έμ— μ •μλ μ—λ¬κ°€ κµ¬ν„ μ•λ¨ β†’ [WARN]
- κµ¬ν„λ μ—λ¬κ°€ λ…μ„Έμ— μ—†μ β†’ [WARN]

---

### Step 5: μƒνΈ μ°Έμ΅° κ²€μ‚¬

`docs/cross_reference_strategy.md` κΈ°μ¤€:
- κΉ¨μ§„ μƒλ€ κ²½λ΅ λ§ν¬ λ°κ²¬
- ν•„μ μƒνΈ μ°Έμ΅° λ„λ½ (DB μ¤ν‚¤λ§, μ½”λ“ κ°€μ΄λ“ λ“±)

---

## μ¶λ ¥ ν•μ‹

```markdown
# Docs Sync Report

## κ²€μ‚¬ μ”μ•½
- **κ²€μ‚¬ λ¨λ“**: μ „μ²΄ / λ„λ©”μΈλ³„ / λ³€κ²½λ νμΌ
- **κ²€μ‚¬ λ„λ©”μΈ**: Nκ°
- **μ΄ μ—”λ“ν¬μΈνΈ**: Nκ°
- **λ™κΈ°ν™”μ¨**: XX%

---

## λ™κΈ°ν™” μƒνƒ

| λ„λ©”μΈ | μƒνƒ | λ…μ„Έ | μ½”λ“ | λ™κΈ°ν™”μ¨ | λΉ„κ³  |
|--------|------|------|------|----------|------|
| auth   | β… SYNC | 5 | 5 | 100% | - |
| users  | π§ PARTIAL | 6 | 1 | 17% | 5κ° λ―Έκµ¬ν„ |
| products | β MISSING | 10 | 0 | 0% | μ „μ²΄ λ―Έκµ¬ν„ |

---

## μƒμ„Έ λ¦¬ν¬νΈ

### auth (β… SYNC)
| μƒνƒ | Method | Path | λΉ„κ³  |
|------|--------|------|------|
| β… | POST | /api/v1/auth/register | |
| β… | POST | /api/v1/auth/login | |
| β… | POST | /api/v1/auth/refresh | |
| β… | POST | /api/v1/auth/logout | |

### users (π§ PARTIAL)
| μƒνƒ | Method | Path | λΉ„κ³  |
|------|--------|------|------|
| β… | GET | /api/v1/users/me | |
| β | PATCH | /api/v1/users/me | λ―Έκµ¬ν„ |
| β | GET | /api/v1/users/me/wishlist | λ―Έκµ¬ν„ |
| β | POST | /api/v1/users/me/wishlist | λ―Έκµ¬ν„ |
| β | DELETE | /api/v1/users/me/wishlist/{id} | λ―Έκµ¬ν„ |

### products (β MISSING)
- μ „μ²΄ API λ―Έκµ¬ν„
- λ…μ„Έ: docs/05_api/api_products.md

---

## μ¤ν‚¤λ§ λ¶μΌμΉ

| λ„λ©”μΈ | μ—”λ“ν¬μΈνΈ | ν•„λ“ | λ…μ„Έ | μ½”λ“ |
|--------|-----------|------|------|------|
| (μ—†μ) | | | | |

---

## μ—λ¬ μ½”λ“ λ¶μΌμΉ

| λ„λ©”μΈ | μ—”λ“ν¬μΈνΈ | μƒνƒμ½”λ“ | μƒνƒ |
|--------|-----------|---------|------|
| (μ—†μ) | | | |

---

## μ μ•

### μ½”λ“ μ¶”κ°€ ν•„μ”
1. **users** λ„λ©”μΈ
   - PATCH /api/v1/users/me
   - GET/POST/DELETE /api/v1/users/me/wishlist
   - κ¶μ¥: `/api-plan users` μ‹¤ν–‰

2. **products** λ„λ©”μΈ
   - μ „μ²΄ API κµ¬ν„ ν•„μ”
   - κ¶μ¥: `/api-plan products` μ‹¤ν–‰

### λ¬Έμ„ μ—…λ°μ΄νΈ ν•„μ”
(ν•΄λ‹Ή μ‚¬ν•­ μ—†μ)

### μ¤ν‚¤λ§ μμ • ν•„μ”
(ν•΄λ‹Ή μ‚¬ν•­ μ—†μ)

---

## λ‹¤μ λ‹¨κ³„

1. λ―Έκµ¬ν„ API β†’ `/api-plan {domain}` μ‹¤ν–‰
2. λ¬Έμ„ μ—…λ°μ΄νΈ β†’ μ§μ ‘ μμ • λλ” μ½”λ“μ—μ„ μλ™ μƒμ„±
3. μ¤ν‚¤λ§ λ¶μΌμΉ β†’ μ½”λ“ λλ” λ…μ„Έ μμ •
```

---

## νΈλ¬λΈ”μν…

### λ…μ„Έ νμΌμ„ μ°Ύμ„ μ μ—†μ
1. `docs/05_api/` λ””λ ‰ν† λ¦¬ ν™•μΈ
2. νμΌλ… ν¨ν„΄: `api_{domain}.md`
3. νμΌ λ©λ΅ ν™•μΈ: `ls docs/05_api/`

### λΌμ°ν„° νμΌμ„ μ°Ύμ„ μ μ—†μ
1. `backend/app/api/v1/routes/` λ””λ ‰ν† λ¦¬ ν™•μΈ
2. νμΌλ… ν¨ν„΄: `{domain}.py`
3. `__init__.py`μ— λ“±λ΅λμ–΄ μλ”μ§€ ν™•μΈ

### μ—”λ“ν¬μΈνΈ νμ‹± μ‹¤ν¨
1. λ…μ„Έ ν•μ‹ ν™•μΈ (ν‘μ¤€ λ§ν¬λ‹¤μ΄ ν•μ‹)
2. λΌμ°ν„° λ°μ½”λ μ΄ν„° ν•μ‹ ν™•μΈ
3. κ²½λ΅ ν¨ν„΄μ΄ μΌμΉν•λ”μ§€ ν™•μΈ

### git diff μ‹¤ν¨
1. Git μ €μ¥μ†μΈμ§€ ν™•μΈ
2. μ»¤λ°‹μ΄ μλ”μ§€ ν™•μΈ: `git log --oneline -1`
3. λ³€κ²½μ‚¬ν•­μ΄ μλ”μ§€ ν™•μΈ: `git status`

### λ™κΈ°ν™”μ¨μ΄ 0%λ΅ ν‘μ‹λ¨
1. λ…μ„Έμ™€ μ½”λ“μ κ²½λ΅ ν¨ν„΄μ΄ λ‹¤λ¥Έμ§€ ν™•μΈ
2. API prefixκ°€ λ‹¤λ¥Έμ§€ ν™•μΈ (/api/v1 vs /v1)
3. λ€μ†λ¬Έμ μ°¨μ΄ ν™•μΈ

---

## μ‚¬μ© μμ‹

```bash
# μ „μ²΄ λ™κΈ°ν™” κ²€μ‚¬
/docs-sync

# auth λ„λ©”μΈλ§ κ²€μ‚¬
/docs-sync auth

# μµκ·Ό λ³€κ²½λ νμΌλ§ κ²€μ‚¬
/docs-sync --changed

# κ²°κ³Ό ν™•μΈ ν›„ λ―Έκµ¬ν„ API κ³„ν
/api-plan products
```

---

## λ‹¤μ λ‹¨κ³„

λ™κΈ°ν™” ν™•μΈ μ™„λ£ ν›„:

### 1. λ™κΈ°ν™”μ¨ 100%μΈ κ²½μ°
```
"μ»¤λ°‹ν•΄μ¤" λλ” μ§μ ‘ git commit
```

### 2. λ™κΈ°ν™” ν•„μ”ν• κ²½μ°
- **μ½”λ“ μ¶”κ°€ ν•„μ”**: `/api-scaffold {domain}` μ‹¤ν–‰
- **λ¬Έμ„ μ—…λ°μ΄νΈ ν•„μ”**: μ§μ ‘ νΈμ§‘ λλ” "λ¬Έμ„ μ—…λ°μ΄νΈν•΄μ¤"

### 3. μ™„λ£ ν›„ ν„ν™© ν™•μΈ
```
/status λλ” "ν„ν™© ν™•μΈν•΄μ¤"
```
- λ‹¤μ μ‘μ—… μ¶”μ² λ°›κΈ°
- μ „μ²΄ μ§„ν–‰λ¥  ν™•μΈ
