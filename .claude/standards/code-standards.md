# Code Standards (ì½”ë“œ í‘œì¤€)

> ë¦°í„°/í¬ë§¤í„°ë¡œ ëŒ€ì²´ ê°€ëŠ¥í•œ ìŠ¤íƒ€ì¼ ê·œì¹™ì€ ì œì™¸í•˜ê³ , ì„¤ê³„ ì›ì¹™ê³¼ ì „ëµë§Œ í¬í•¨

---

## ê³µí†µ ì›ì¹™

- **SRP (ë‹¨ì¼ ì±…ì„)**: í•¨ìˆ˜/ë©”ì„œë“œëŠ” í•˜ë‚˜ì˜ ì±…ì„ë§Œ
- **íŒŒì¼ í¬ê¸°**: 200ì¤„ ì´ˆê³¼ ì‹œ ë¶„ë¦¬ ì œì•ˆ
- **ì¤‘ë³µ ë¡œì§**: í—¬í¼ í•¨ìˆ˜/ê³µìš© ëª¨ë“ˆë¡œ ë¦¬íŒ©í† ë§ ì œì•ˆ
- **Secrets**: ì½”ë“œ ë‚´ í•˜ë“œì½”ë”© ì ˆëŒ€ ê¸ˆì§€ (í™˜ê²½ë³€ìˆ˜, Secret Manager ì‚¬ìš©)
- **Idempotency (ë©±ë“±ì„±)**: ì—¬ëŸ¬ ë²ˆ ì‹¤í–‰í•´ë„ ì•ˆì „í•˜ê²Œ (`IF NOT EXISTS`, `mkdir -p`)

---

## TDD ë°©ë²•ë¡ 

### í•µì‹¬ ì›ì¹™: Red-Green-Refactor

```
ğŸ”´ RED â†’ ğŸŸ¢ GREEN â†’ ğŸ”µ REFACTOR â†’ ğŸŸ¢ GREEN (ë°˜ë³µ)
```

### 3ê°€ì§€ ì ˆëŒ€ ê·œì¹™

1. **í…ŒìŠ¤íŠ¸ ë¨¼ì €, ì½”ë“œ ë‚˜ì¤‘** - êµ¬í˜„ ì „ í…ŒìŠ¤íŠ¸ ì‘ì„±, í…ŒìŠ¤íŠ¸ëŠ” ì‹¤í–‰ ê°€ëŠ¥í•œ ëª…ì„¸
2. **ì‹¤íŒ¨ í™•ì¸ (RED)** - êµ¬í˜„ ì „ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ í™•ì¸ í•„ìˆ˜, í•­ìƒ í†µê³¼í•˜ëŠ” í…ŒìŠ¤íŠ¸ëŠ” ë¬´ì˜ë¯¸
3. **êµ¬í˜„ ì¤‘ í…ŒìŠ¤íŠ¸ ìˆ˜ì • ê¸ˆì§€** - í…ŒìŠ¤íŠ¸ê°€ ê³„ì•½, êµ¬í˜„ì´ í…ŒìŠ¤íŠ¸ì— ë§ì¶¤

### TDD ì‚¬ì´í´

```
PROCEDURE tdd_cycle(feature_name):
    1. RED_phase:
        write_failing_test(feature_name)
        run_tests()
        CONFIRM failure_message

    2. GREEN_phase:
        write_minimum_code_to_pass_test()
        run_tests()

    3. REFACTOR_phase:
        improve_code_quality()
        run_tests()
        IF tests_still_pass: commit
        ELSE: revert
```

### TDD ì ìš© ëŒ€ìƒ

| ëŒ€ìƒ | TDD | í…ŒìŠ¤íŠ¸ ìˆ˜ì¤€ |
|------|-----|------------|
| ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ | âœ… í•„ìˆ˜ | Unit |
| ì™¸ë¶€ API ì—°ë™ | âœ… í•„ìˆ˜ | Unit + Integration |
| ë°ì´í„° ë³€í™˜/ê²€ì¦ | âœ… í•„ìˆ˜ | Unit |
| ë²„ê·¸ ìˆ˜ì • | âœ… í•„ìˆ˜ | Unit (ì¬ë°œ ë°©ì§€) |
| Service ê³„ì¸µ | âœ… í•„ìˆ˜ | Unit + Integration |
| Repository ê³„ì¸µ | âœ… í•„ìˆ˜ | Integration |

### TDD ì œì™¸ ëŒ€ìƒ & ëŒ€ì•ˆ ê²€ì¦

| ëŒ€ìƒ | ì œì™¸ ì´ìœ  | ëŒ€ì•ˆ ê²€ì¦ |
|------|----------|----------|
| IaC (Terraform, Ansible) | ìƒíƒœ/í™˜ê²½ ì˜ì¡´ | `terraform plan`, `ansible --check` |
| Shell ìŠ¤í¬ë¦½íŠ¸ | í™˜ê²½ ì˜ì¡´, ì‹œìŠ¤í…œ í˜¸ì¶œ | `bash -n`, `shellcheck`, `--dry-run` |
| ë§ˆì´ê·¸ë ˆì´ì…˜/ë°°ì¹˜ | ë°˜ë³µ ë¶ˆê°€, í”„ë¡œë•ì…˜ ì˜ì¡´ | ë°±ì—… í•„ìˆ˜, í…ŒìŠ¤íŠ¸ ë°ì´í„°ë¡œ dry-run |
| ë‹¨ìˆœ CRUD | í”„ë ˆì„ì›Œí¬ ì¶”ìƒí™” | Framework í†µí•© í…ŒìŠ¤íŠ¸ |

### í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ

```
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  E2E    â”‚  10%
      â”Œâ”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”
      â”‚Integrationâ”‚  30%
     â”Œâ”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”
     â”‚    Unit     â”‚  60%
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### í…ŒìŠ¤íŠ¸ íŒ¨í„´: Given-When-Then

```python
def test_get_product_by_id_success():
    # Given (ì¤€ë¹„)
    service = ProductService()
    product_id = "P001"

    # When (ì‹¤í–‰)
    product = service.get_product_by_id(product_id)

    # Then (ê²€ì¦)
    assert product.id == product_id
```

### pytest ì„¤ì •

```ini
[pytest]
testpaths = tests
addopts = -v --cov=app --cov-report=html --cov-fail-under=80
markers =
    unit: Unit tests
    integration: Integration tests
    e2e: End-to-end tests
```

### í…ŒìŠ¤íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
tests/
â”œâ”€â”€ conftest.py         # ê³µìœ  Fixture
â”œâ”€â”€ unit/               # 60%
â”œâ”€â”€ integration/        # 30%
â””â”€â”€ e2e/                # 10%
```

### TDD ì•ˆí‹°íŒ¨í„´

| ì•ˆí‹°íŒ¨í„´ | ë¬¸ì œ | í•´ê²° |
|---------|------|------|
| êµ¬í˜„ ë¨¼ì €, í…ŒìŠ¤íŠ¸ ë‚˜ì¤‘ | í…ŒìŠ¤íŠ¸ê°€ ì½”ë“œì— ë§ì¶°ì§ | RED ë‹¨ê³„ í•„ìˆ˜ |
| RED ë‹¨ê³„ ìƒëµ | False positive | ì‹¤íŒ¨ í™•ì¸ í•„ìˆ˜ |
| êµ¬í˜„ ì¤‘ í…ŒìŠ¤íŠ¸ ìˆ˜ì • | ê³„ì•½ ìœ„ë°˜ | ì‚¬ì´í´ ì¬ì‹œì‘ |
| í•œ í…ŒìŠ¤íŠ¸ì— ë‹¤ ë‹´ê¸° | ì‹¤íŒ¨ ì›ì¸ íŒŒì•… ì–´ë ¤ì›€ | ì‘ì€ ë‹¨ìœ„ë¡œ ë¶„ë¦¬ |
| 100% ì»¤ë²„ë¦¬ì§€ ì§‘ì°© | ë¶ˆí•„ìš”í•œ í…ŒìŠ¤íŠ¸ | 80%+ ëª©í‘œ |

---

## Spec Document Style (ì‚¬ì „ ì •ì˜ ë¬¸ì„œ)

ìƒì„¸ ê°€ì´ë“œëŠ” `~/.claude/standards/spec-docs-guide.md` ì°¸ì¡°.

**ìš”ì•½**:
- PRD, ERD, API ëª…ì„¸, Backlog ë“± í…œí”Œë¦¿ ì œê³µ
- **ì˜ì‚¬ì½”ë“œ + êµ¬í˜„ íŒíŠ¸** íŒ¨í„´ ì‚¬ìš©
- **Kindergarten & Senior** ì„¤ëª… ê·œì¹™ ì ìš©
- ë¬¸ì„œë‹¹ **300ì¤„ ì œí•œ**, ì´ˆê³¼ ì‹œ ë¶„ë¦¬

---

## Diagram Style (ë‹¤ì´ì–´ê·¸ë¨)

- **ë„êµ¬**: Mermaid ì‚¬ìš© (Text-based, Git ì¹œí™”ì )
- **ì ìš© ë²”ìœ„**:
  - Flowchart: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ íë¦„
  - Sequence Diagram: API í˜¸ì¶œ íë¦„, ì‹œìŠ¤í…œ ê°„ í†µì‹ 
  - ERD: ë°ì´í„° ëª¨ë¸ ê´€ê³„
  - Architecture Diagram: ì»´í¬ë„ŒíŠ¸ êµ¬ì„±
- **ì˜ˆì™¸**: ë³µì¡í•œ ì¸í”„ë¼ í† í´ë¡œì§€ëŠ” Draw.io + PNG export í—ˆìš©
